<div class="cart-container" *ngIf="cart; else emptyCart">
  <button class="back-button" (click)="goBackToProducts()">← Torna ai prodotti</button>

  <h2 class="cart-title">Il tuo Carrello</h2>

  <div *ngFor="let item of cart.items">
    <div class="item">
      <img [src]="item.productImageUrl" alt="{{ item.productName }}" />
      <div class="details">
        <div class="info">
          <p><strong>{{ item.productName }}</strong></p>
          <p>Prezzo unitario: € {{ item.unitPrice }}</p>
          <p>Totale: € {{ item.totalPrice }}</p>
        </div>
        <div class="actions">
          <input
            type="number"
            [value]="item.quantity"
            (change)="updateQuantityFromEvent(item, $event)"
            min="1"
          />
          <button (click)="removeItem(item)">Rimuovi</button>
        </div>
      </div>
    </div>
  </div>

  <div class="cart-summary">
    <p><strong>Totale articoli:</strong> {{ cart.totalItems }}</p>
    <p><strong>Totale carrello:</strong> € {{ cart.totalPrice }}</p>
  </div>

  <div class="cart-actions">
    <button class="clear" (click)="clearCart()">Svuota carrello</button>
    <button (click)="proceedToCheckout()">Procedi al Checkout</button>
  </div>
</div>

<ng-template #emptyCart>
  <div class="empty-cart">
    <h2>Il carrello è vuoto.</h2>
    <a routerLink="/products">Vai ai prodotti</a>
  </div>
</ng-template>
