<!-- Messaggio toast -->
<div *ngIf="showAddedMessage" class="toast">
  ✅ Prodotto aggiunto al carrello!
</div>

<div class="product-list">
  <div class="product-card" *ngFor="let product of products">
    <!-- Immagine cliccabile -->
    <a [routerLink]="['/products', product.id]">
      <img
        [src]="product.imageUrl"
        loading="lazy"
        alt="Immagine di {{ product.name }}"
        (error)="onImageError($event)"
        class="product-image"
      />
    </a>

    <div class="product-info">
      <!-- Nome cliccabile -->
      <h3 class="clickable-title">
        <a [routerLink]="['/products', product.id]">{{ product.name }}</a>
      </h3>

      <p class="description">{{ product.description }}</p>
      <p class="price">€ {{ product.price.toFixed(2) }}</p>
      <p class="availability" [ngClass]="{ 'in-stock': product.inStock, 'out-of-stock': !product.inStock }">
        {{ product.inStock ? 'Disponibile' : 'Non disponibile' }}
      </p>
      <p *ngIf="product.inStock">
        <strong>Quantità disponibile:</strong> {{ product.availableQuantity }}
      </p>
      <button
        [disabled]="!product.inStock"
        (click)="addToCart(product.id)"
        class="add-to-cart"
      >
        Aggiungi al carrello
      </button>
    </div>
  </div>
</div>
