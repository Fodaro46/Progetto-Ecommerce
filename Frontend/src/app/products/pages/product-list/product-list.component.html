<app-navbar></app-navbar>
<section class="product-list-section">
  <h2 class="section-title">Elenco Prodotti</h2>

  <div *ngIf="loading" class="loader">Caricamento prodotti...</div>
  <div *ngIf="error" class="error-msg">{{ error }}</div>

  <div class="grid-container" *ngIf="!loading && !error">
    <div *ngFor="let p of products" class="card">
      <div class="card-img">
        <img
          [src]="p.imageUrl"
          alt="{{ p.name }}"
          loading="lazy"
          (error)="onImageError(p)" />
      </div>
      <div class="card-body">
        <h3 class="card-title" (click)="viewProductDetails(p.id)">{{ p.name }}</h3>
        <p class="card-desc">{{ p.description }}</p>
        <div class="card-footer">
          <span class="price">{{ p.price | currency:'EUR':'symbol' }}</span>
          <button
            (click)="addToCart(p)"
            [disabled]="!p.inStock"
            class="btn-add">
            <span *ngIf="p.inStock">Aggiungi</span>
            <span *ngIf="!p.inStock">Esaurito</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
